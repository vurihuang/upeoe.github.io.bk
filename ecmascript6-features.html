<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Upeoe&#39;s blog | ECMAScript6 Features</title>
    <meta name="description" content="本文是对 ECMAScript 6 新标准的简要介绍。">
    
    
    <link rel="preload" href="/assets/css/8.styles.6929ea29.css" as="style"><link rel="preload" href="/assets/js/app.b13a9952.js" as="script"><link rel="preload" href="/assets/js/4.58344f02.js" as="script"><link rel="prefetch" href="/assets/js/5.24f6172c.js"><link rel="prefetch" href="/assets/js/1.99dd3f21.js"><link rel="prefetch" href="/assets/js/2.1f75e579.js"><link rel="prefetch" href="/assets/js/3.f52f4b16.js"><link rel="prefetch" href="/assets/js/0.a350d689.js"><link rel="prefetch" href="/assets/js/6.c9e6dd41.js"><link rel="prefetch" href="/assets/js/7.49de4a32.js">
    <link rel="stylesheet" href="/assets/css/8.styles.6929ea29.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Upeoe's blog
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>ECMAScript6 Features</span><!----></p><ul class="sidebar-group-items"><li><a href="/ecmascript6-features.html#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#arrows" class="sidebar-link">Arrows</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#classes" class="sidebar-link">Classes</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#enhanced-object-literals" class="sidebar-link">Enhanced Object Literals</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#template-strings" class="sidebar-link">Template Strings</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#destructuring" class="sidebar-link">Destructuring</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#default-rest-spread" class="sidebar-link">Default + Rest + Spread</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#let-const" class="sidebar-link">Let + Const</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#iterators-for…of" class="sidebar-link">Iterators + For…Of</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#generators" class="sidebar-link">Generators</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#unicode" class="sidebar-link">Unicode</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#modules" class="sidebar-link">Modules</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#module-loaders" class="sidebar-link">Module Loaders</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#map-set-weakmap-weakset" class="sidebar-link">Map + Set + WeakMap + WeakSet</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#proxies" class="sidebar-link">Proxies</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#symbols" class="sidebar-link">Symbols</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#subclassable-built-ins" class="sidebar-link">Subclassable Built-ins</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#math-number-string-array-object-apis" class="sidebar-link">Math + Number + String + Array + Object APIs</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#binary-and-octal-literals" class="sidebar-link">Binary and Octal Literals</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#promises" class="sidebar-link">Promises</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#reflect-api" class="sidebar-link">Reflect API</a></li><li class="sidebar-sub-header"><a href="/ecmascript6-features.html#tail-calls" class="sidebar-link">Tail Calls</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h2 id="introduction">Introduction</h2><p>原文: <a href="https://github.com/lukehoban/es6features/blob/master/README.md" target="_blank" rel="noopener noreferrer">ECMAScript 6 Features</a></p><p>本文是对 ECMAScript 6 新标准的简要介绍。</p><p>ECMAScript 6，也称 ECMAScript 2015，是 ECMAScript 的最新标准。ES6 是对 JavaScript 的一次重大更新，也是自2009年的 ES5 标准后的第一次更新。
主流的 JavaScript 引擎都逐渐对这些新标准提供支持。</p><p></p><div class="table-of-contents"><ul><li><a href="#introduction">Introduction</a><ul><li><a href="#arrows">Arrows</a></li><li><a href="#classes">Classes</a></li><li><a href="#enhanced-object-literals">Enhanced Object Literals</a></li><li><a href="#template-strings">Template Strings</a></li><li><a href="#destructuring">Destructuring</a></li><li><a href="#default-rest-spread">Default + Rest + Spread</a></li><li><a href="#let-const">Let + Const</a></li><li><a href="#iterators-for…of">Iterators + For…Of</a></li><li><a href="#generators">Generators</a></li><li><a href="#unicode">Unicode</a></li><li><a href="#modules">Modules</a></li><li><a href="#module-loaders">Module Loaders</a></li><li><a href="#map-set-weakmap-weakset">Map + Set + WeakMap + WeakSet</a></li><li><a href="#proxies">Proxies</a></li><li><a href="#symbols">Symbols</a></li><li><a href="#subclassable-built-ins">Subclassable Built-ins</a></li><li><a href="#math-number-string-array-object-apis">Math + Number + String + Array + Object APIs</a></li><li><a href="#binary-and-octal-literals">Binary and Octal Literals</a></li><li><a href="#promises">Promises</a></li><li><a href="#reflect-api">Reflect API</a></li><li><a href="#tail-calls">Tail Calls</a></li></ul></li></ul></div><p></p><h3 id="arrows">Arrows</h3><p>箭头函数是简写的函数表达式，可以被记为 <code>=&gt;</code> 这样的语法形式。语法上和 C#， Java 8 以及 CoffeeScript 有点相似。
他们都支持语句块形式和表达式形式，并且表达式形式会返回表达式计算的返回值。和普通函数有所区别的是，箭头函数会捕获当前所在上下文的 this 来作为该函数的 this 值(而不像普通函数一样每个定义的函数都有自己的 this 值)。</p><pre class="language-js"><code><span class="token comment">// Expression bodies</span>
<span class="token keyword">var</span> odds <span class="token operator">=</span> evens<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>v <span class="token operator">=&gt;</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> nums <span class="token operator">=</span> evens<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v <span class="token operator">+</span> i<span class="token punctuation">)</span>
<span class="token keyword">var</span> pairs <span class="token operator">=</span> evens<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>v <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> even<span class="token punctuation">:</span> v<span class="token punctuation">,</span> odd<span class="token punctuation">:</span> v<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// Statement bodies</span>
nums<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>v <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fives<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Lexical `this`</span>
<span class="token keyword">var</span> bob <span class="token operator">=</span> <span class="token punctuation">{</span>
  _name<span class="token punctuation">:</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span>
  _friends<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">printFriends</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_friends<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>f <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">+</span> <span class="token string">&quot; knows &quot;</span> <span class="token operator">+</span> f<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener noreferrer">MDN Arrow Functions</a></p><h3 id="classes">Classes</h3><p>ES6 的 classes 是 JavaScript 现有的面向对象-原型继承(prototype-based)的语法糖。单一声明链使得 JavaScript 的类更易于使用以及相互协作。
<code>classes</code> 支持原型继承、调用父类的<code>super</code>、创建实例、静态方法以及构造函数等等…</p><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">SkinnedMesh</span> <span class="token keyword">extends</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> materials<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> materials<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>idMatrix <span class="token operator">=</span> SkinnedMesh<span class="token punctuation">.</span><span class="token function">defaultMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bones <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>boneMatrices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token function">update</span><span class="token punctuation">(</span>camera<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">get</span> <span class="token function">boneCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bones<span class="token punctuation">.</span>length
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">matrixType</span><span class="token punctuation">(</span>matrixType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>idMatrix <span class="token operator">=</span> SkinnedMesh<span class="token punctuation">[</span>matrixType<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token function">defaultMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Matrix4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes" target="_blank" rel="noopener noreferrer">MDN Classes</a></p><h3 id="enhanced-object-literals">Enhanced Object Literals</h3><p>对象字面量(封闭在对象花括号<code>{}</code>内键值对)扩展是为了支持构造函数、类似<code>foo: foo</code>这类语法的简写、定义方法、调用父类方法、通过表达式计算属性值等作用。这些功能让对象字面量更加靠近声明类，也让对象继承更加易于使用。</p><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 原型内部属性</span>
  __proto__<span class="token punctuation">:</span> theProtoObj<span class="token punctuation">,</span>
  <span class="token comment">// `handler: handler` 语法的简写</span>
  handler<span class="token punctuation">,</span>
  <span class="token comment">// 定义方法</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用父类方法</span>
    <span class="token keyword">return</span> <span class="token string">'d '</span> <span class="token operator">+</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 动态计算属性值</span>
  <span class="token punctuation">[</span> <span class="token string">'prop_'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">42</span>
<span class="token punctuation">}</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#Object_literals" target="_blank" rel="noopener noreferrer">MDN Grammar and types: Object literals</a></p><h3 id="template-strings">Template Strings</h3><p>模板字符串提供了创建字符串的语法糖。这种功能和Perl、Python有点相似。增加一个’标签’可以创建一个普通的字符串，同时避免注入攻击或无意从字符串中创建了更高级的数据结构。</p><pre class="language-js"><code><span class="token comment">// 基本创建用法</span>
<span class="token template-string"><span class="token string">`In JavaScript '\n' is a line-feed.`</span></span>
<span class="token comment">// 多行形式的字符串</span>
<span class="token template-string"><span class="token string">`In JavaScript this is
not legal.`</span></span>
<span class="token comment">// 字符串模板</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token string">'tody'</span>
<span class="token template-string"><span class="token string">`Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, how are you </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?`</span></span>
<span class="token comment">// 通过新特性(构造、替换)来说明如何创建一个 HTTP 请求前缀</span>
<span class="token constant">POST</span><span class="token template-string"><span class="token string">`http://foo.org/bar?a=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;b=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
     Content-Type: application/json
     { &quot;foo&quot;: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>foo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,
       &quot;bar&quot;: {$bar} }`</span></span><span class="token punctuation">(</span>myOnReadyStateChangeHandler<span class="token punctuation">)</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/template_strings" target="_blank" rel="noopener noreferrer">MDN Template Strings</a></p><h3 id="destructuring">Destructuring</h3><p>‘解构’特性允许通过模式匹配来赋值，支持数组和对象。和对象相似，如果 <code>foo['bar']</code> 找不到结果会返回 <code>undefined</code>，解构匹配赋值没有找到结果也返回 <code>undefined</code>。</p><pre class="language-js"><code><span class="token comment">// 数组匹配</span>
<span class="token keyword">var</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token punctuation">,</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token comment">// 对象匹配</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span>
  op<span class="token punctuation">:</span> a<span class="token punctuation">,</span>
  lhs<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    op<span class="token punctuation">:</span> b
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  rhs<span class="token punctuation">:</span> c
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getASTNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 对象属性简写语法糖赋值</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span> op<span class="token punctuation">,</span> lhs<span class="token punctuation">,</span> rhs <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getASTNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 传参形式</span>
<span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> x <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Fail Soft(意即使出错也保持程序能够继续运行)</span>
<span class="token keyword">var</span> <span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
a <span class="token operator">===</span> undefined <span class="token comment">// true</span>
<span class="token comment">// Fail Soft (带默认值)</span>
<span class="token keyword">var</span> <span class="token punctuation">[</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
a <span class="token operator">===</span> <span class="token number">1</span> <span class="token comment">// true</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener noreferrer">MDN Destructuring assignment</a></p><h3 id="default-rest-spread">Default + Rest + Spread</h3><p>类似 Java 中的可变参数，将参数变成一个数组传入，来替代先前的零个或多个参数。</p><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果没有传入 y 或 y 等于 undefined, 给 y 一个默认值12</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">15</span> <span class="token comment">// true</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token operator">...</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// y 是一个数组类型</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">.</span>length
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">6</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
<span class="token punctuation">}</span>
<span class="token comment">// 多个参数打包成数组传入，并自动解构参数</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">6</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters" target="_blank" rel="noopener noreferrer">Default parameters</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters" target="_blank" rel="noopener noreferrer">Rest parameters</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator" target="_blank" rel="noopener noreferrer">Spread Operator</a></p><h3 id="let-const">Let + Const</h3><p>只在块级域中生效的变量声明。<code>const</code> 用来声明一个只读的常量，一经声明就无法修改值。</p><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x
    <span class="token punctuation">{</span>
      <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token string">'sneaky'</span> <span class="token comment">// 起作用，因为是块级域的声明</span>
      x <span class="token operator">=</span> <span class="token string">'foo'</span> <span class="token comment">// 赋值失败，x 是只读的</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">'inner'</span> <span class="token comment">// 错误，`let` 无法重复声明</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let" target="_blank" rel="noopener noreferrer">let statement</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const" target="_blank" rel="noopener noreferrer">const statement</a></p><h3 id="iterators-for…of">Iterators + For…Of</h3><p>迭代器对象的作用类似 <a href="https://msdn.microsoft.com/zh-sg/library/ms131103.aspx" target="_blank" rel="noopener noreferrer">CLR</a> 的 <code>IEumberable</code> 和 Java 中的 <code>Iterable</code>。</p><pre class="language-js"><code><span class="token keyword">let</span> fibonacci <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pre <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>pre<span class="token punctuation">,</span> cur<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>cur<span class="token punctuation">,</span> pre <span class="token operator">+</span> cur<span class="token punctuation">]</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          done<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          value<span class="token punctuation">:</span> cur
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> n <span class="token keyword">of</span> fibonacci<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">break</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><p>☞ 更多信息:<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener noreferrer">MDN for…of</a></p><h3 id="generators">Generators</h3><p>生成器类似迭代器， 通过 <code>function*</code> 和 <code>yield</code> 关键词可以达到同样的作用。如果一个函数以 <code>function*</code> 声明那么将返回一个生成器实例。生成器是迭代器的子类型，所以它也有 <code>next</code> 和 <code>throw</code>。使用关键词 <code>yield</code> 能返回一个值(或抛出错误)。</p><p>☞ 同样也能使用 <code>await</code> 完成异步操作。</p><pre class="language-js"><code><span class="token keyword">let</span> fibonacci <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pre <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> temp <span class="token operator">=</span> pre
      pre <span class="token operator">=</span> cur
      cur <span class="token operator">+=</span> temp
      <span class="token keyword">yield</span> cur
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> n <span class="token keyword">of</span> fibonacci<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">break</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols" target="_blank" rel="noopener noreferrer">MDN Iteration protocols</a></p><h3 id="unicode">Unicode</h3><p>增强对 Unicode 的支持，包括扩展字符串、正则以及 <code>codePointAt()</code>(返回一个字符的码点,方便处理4个字节存储的字符)</p><pre class="language-js"><code><span class="token comment">// 同 ES5.1 结果相同</span>
<span class="token string">'𠮷'</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span>
<span class="token comment">// 可以用正则匹配 `u` (unicode)</span>
<span class="token string">'𠮷'</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/./u</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span>
<span class="token comment">// 字符的 Unicode 表示法 `\uxxxx`(`\u0000 - \uFFFF) or `\u{xxx}`</span>
<span class="token string">'\u{20BB7}'</span> <span class="token operator">===</span> <span class="token string">'𠮷'</span> <span class="token operator">===</span> <span class="token string">'\uD842\uDFB7'</span>
<span class="token comment">// JavaScript 字符以 UTF-16 存储，每个字符固定2个字节</span>
<span class="token comment">// 使用 codePointAt 方法可以正确处理以4个字节存储的字符</span>
<span class="token string">'𠮷'</span><span class="token punctuation">.</span><span class="token function">codePonintAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0x20BB7</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> c <span class="token keyword">of</span> <span class="token string">'𠮷'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicode" target="_blank" rel="noopener noreferrer">MDN RegExp.prototype.unicode</a></p><h3 id="modules">Modules</h3><p>增加了模块化支持，原先的解决方案主要有 AMD, CommonJS 两种模块加载方案。ES6 提出的模块化希望尽可能地静态化，在编译时就确定模块的依赖关系。当然也支持异步加载模块，在模块没有被加载完毕前就不会执行指定代码。</p><pre class="language-js"><code><span class="token comment">// lib/math.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.141593</span>
</code></pre><pre class="language-js"><code><span class="token comment">// app.js</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> math <span class="token keyword">from</span> <span class="token string">'lib/math'</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'2π = '</span> <span class="token operator">+</span> math<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><pre class="language-js"><code><span class="token comment">// otherApp.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sum<span class="token punctuation">,</span> <span class="token constant">PI</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lib/math'</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'2π = '</span> <span class="token operator">+</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token constant">PI</span><span class="token punctuation">,</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><p>支持 <code>export default</code> 和 <code>export *</code>:</p><pre class="language-js"><code><span class="token comment">// lib/mattplusplus.js</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'lib/math'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">E</span> <span class="token operator">=</span> <span class="token number">2.71828182846</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><pre class="language-js"><code><span class="token comment">// app.js</span>
<span class="token keyword">import</span> ln<span class="token punctuation">,</span> <span class="token punctuation">{</span> pi<span class="token punctuation">,</span> <span class="token constant">E</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lib/mathplusplus'</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'2π = '</span> <span class="token operator">+</span> <span class="token function">ln</span><span class="token punctuation">(</span><span class="token constant">E</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" target="_blank" rel="noopener noreferrer">import statement</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export" target="_blank" rel="noopener noreferrer">export statement</a></p><h3 id="module-loaders">Module Loaders</h3><p>模块加载器支持:</p><ul><li>动态加载</li><li>隔离状态(变量、方法…)</li><li>隔离全局域空间</li><li>钩子</li><li>嵌套使用</li></ul><p>可以配置默认的模块加载器:</p><pre class="language-js"><code><span class="token comment">// 动态加载 - `System` 是默认的加载器</span>
System<span class="token punctuation">.</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'lib/math'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'2π = '</span> <span class="token operator">+</span> m<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> m<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 给新的加载器创建沙盒</span>
<span class="token keyword">var</span> loader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Loader</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  global<span class="token punctuation">:</span> <span class="token function">fixup</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span> <span class="token comment">// 替代 `console.log`</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
loader<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'console.log(&quot;hello world!&quot;)'</span><span class="token punctuation">)</span>
<span class="token comment">// 直接设置模块缓存</span>
System<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span>
System<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token function">Module</span><span class="token punctuation">(</span><span class="token punctuation">{</span>$<span class="token punctuation">:</span> $<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 尚未定稿</span>
</code></pre><h3 id="map-set-weakmap-weakset">Map + Set + WeakMap + WeakSet</h3><p>提供更高效的数据结构。WeakMap/WeakSet 提供弱引用的对象键值对。</p><pre class="language-js"><code><span class="token comment">// Sets</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'goodbye'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>size <span class="token operator">===</span> <span class="token number">2</span>
s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">true</span>
<span class="token comment">// Maps</span>
<span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span>
m<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">)</span>
m<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">34</span>
<span class="token comment">// Weak Maps</span>
<span class="token keyword">var</span> wm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
wm<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token punctuation">{</span> extra<span class="token punctuation">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
wm<span class="token punctuation">.</span>size <span class="token operator">===</span> undefined
<span class="token comment">// Weak Sets</span>
<span class="token comment">// 因为 WeakSet 中的对象都是弱引用，如果其他对象不再引用该对象，就被垃圾回收了，该对象就在 Set 中消失了。</span>
<span class="token keyword">var</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="noopener noreferrer">Map</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="noopener noreferrer">Set</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap" target="_blank" rel="noopener noreferrer">WeakMap</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet" target="_blank" rel="noopener noreferrer">WeakSet</a></p><h3 id="proxies">Proxies</h3><p>Proxy 相当于在目标对象之外设置一层拦截，让 Proxy 来额外执行某些操作，可以理解为对象的代理器。</p><pre class="language-js"><code><span class="token comment">// 代理一个普通对象</span>
<span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
p<span class="token punctuation">.</span>world <span class="token operator">===</span> <span class="token string">'Hello, world'</span>
<span class="token comment">// 代码一个函数对象</span>
<span class="token keyword">var</span> <span class="token function-variable function">target</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'I am a the target'</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  apply<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'I am the proxy'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
<span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'I am the proxy'</span>
<span class="token comment">// Proxy 支持的拦截操作一览:</span>
<span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span><span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  has<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  deleteProperty<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  apply<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  construct<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  getOwnPropertyDescriptor<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  defineProperty<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  getPrototypeOf<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  setPrototypeOf<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  enumerate<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  ownKeys<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  preventExtensions<span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
  isExtensible<span class="token punctuation">:</span> <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">MDN Proxy</a></p><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">MDN Proxy</a></p><h3 id="symbols">Symbols</h3><p>使用 Symbol 来保证对象的每个属性的名字都是独一无二的，能够控制访问对象的状态。Symbols 允许属性的键可以是 <code>string</code> 或 <code>symbol</code>。Symbols 是新增加的原始数据类型(Undefined, Null, Boolean, String, Number, Object)。可选参数 <code>description</code> 可以用来 debug。Symbols 是独一无二的，可以通过 <code>Object.getOwnPropertySymbols</code> 获取指定对象的所有 Symbols 属性名。</p><pre class="language-js"><code><span class="token keyword">var</span> MyClass <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 模块域的 symbol</span>
  <span class="token keyword">var</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">MyClass</span><span class="token punctuation">(</span>privateData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> privateData
  <span class="token punctuation">}</span>
  MyClass<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    doStuff<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ... this[key] ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> MyClass
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
c<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span> <span class="token operator">===</span> undefined
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol" target="_blank" rel="noopener noreferrer">MDN Symbol</a></p><h3 id="subclassable-built-ins">Subclassable Built-ins</h3><p>在 ES6 中， 可以继承类似 <code>Array</code>, <code>Date</code> 以及 DOM 的 <code>Element</code> 等内建类型的 built-ins。</p><p>对象的构造如今分两个阶段执行:</p><ul><li>调用 @@create 分配对象空间，执行一些特定行为</li><li>调用 constructor 创建一个新的实例</li></ul><p>可以通过 <code>Symbol.create</code> 来调用 <code>@@create</code>。</p><pre class="language-js"><code><span class="token comment">// 假冒的 Array</span>
<span class="token keyword">class</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>create<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 可定义一些属性</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 创建一个 MyArray 有两个阶段:</span>
<span class="token comment">// 1) 调用 `@@create` 来分配一个对象空间</span>
<span class="token comment">// 2) 调用 `constructor` 来创建一个新的实例</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>
arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span>
</code></pre><h3 id="math-number-string-array-object-apis">Math + Number + String + Array + Object APIs</h3><p>扩展了许多库，包括核心的 Math 库，数组转换，字符串扩展，以及对象扩展。</p><pre class="language-js"><code>Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span>
Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">'NaN'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Math<span class="token punctuation">.</span><span class="token function">acosh</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 1.762747174039086</span>
Math<span class="token punctuation">.</span><span class="token function">hypot</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
Math<span class="token punctuation">.</span><span class="token function">imul</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
<span class="token string">'abcde'</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'cd'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token string">'abc'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 'abcabcabc'</span>
Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 返回一个数组</span>
Array<span class="token punctuation">.</span><span class="token keyword">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 类似创建一个新的数组，不同的是 Array(2) 是创建一个长度为2的数组`[,,]` 而不是 [2]</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// [0, 7, 7]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 1, 2]</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// iterator [0, 'a'], [1, 'b'], [2, 'c']</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// iterator 0, 1, 2</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// iterator 'a', 'b', 'c'</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>Point<span class="token punctuation">,</span> <span class="token punctuation">{</span> origin<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 对象合并</span>
<span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> source <span class="token operator">=</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source<span class="token punctuation">)</span> <span class="token comment">// {a:1, b:2}</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank" rel="noopener noreferrer">Number</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math" target="_blank" rel="noopener noreferrer">Math</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener noreferrer">Array.from</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of" target="_blank" rel="noopener noreferrer">Array.of</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/copyWithin" target="_blank" rel="noopener noreferrer">Array.prototype.copyWithin</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank" rel="noopener noreferrer">Object.assign</a></p><h3 id="binary-and-octal-literals">Binary and Octal Literals</h3><p>对二进制和八进制的扩展</p><pre class="language-js"><code><span class="token number">0b111110111</span> <span class="token operator">===</span> <span class="token number">503</span> <span class="token comment">// true</span>
<span class="token number">0o767</span> <span class="token operator">===</span> <span class="token number">503</span> <span class="token comment">// true</span>
</code></pre><h3 id="promises">Promises</h3><p>Promise 对象用来进行异步编程，替代以往的回调函数和事件。</p><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span>duration <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// pending 进行中</span>
  <span class="token comment">// resolved 已完成</span>
  <span class="token comment">// reject 已失败</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> duration<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'hmm'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer">MDN Promise</a></p><h3 id="reflect-api">Reflect API</h3><p>Reflect 对象类似 Proxy 对象，暴露一些运行时级别的对象操作方法。允许调用 Proxy 调用的那些操作。可以用来修改一些 Object 方法的返回结果。</p><pre class="language-js"><code><span class="token comment">// 修改返回结果</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span>
  <span class="token comment">// success</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// failure</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// success</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// failure</span>
<span class="token punctuation">}</span>
<span class="token comment">// 让命令式操作变成函数式操作</span>
<span class="token string">'assign'</span> <span class="token keyword">in</span> Object <span class="token comment">// true</span>
Reflect<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>Object<span class="token punctuation">,</span> <span class="token string">'assign'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre><p>☞ 更多信息: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect" target="_blank" rel="noopener noreferrer">MDN Reflect</a></p><h3 id="tail-calls">Tail Calls</h3><p>尾调用保证不会产生栈溢出，确保递归调用的安全性。</p><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> acc<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> acc
  <span class="token keyword">return</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> acc<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span>
</code></pre><hr><p>参考:</p><ul><li><a href="http://www.computerhope.com/jargon/f/failsoft.htm" target="_blank" rel="noopener noreferrer">Fail-Soft System</a></li><li><a href="https://github.com/lukehoban/es6features/" target="_blank" rel="noopener noreferrer">https://github.com/lukehoban/es6features/</a></li><li><a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer">http://es6.ruanyifeng.com/</a></li></ul></div><!----><!----></div></div></div>
    <script src="/assets/js/4.58344f02.js" defer></script><script src="/assets/js/app.b13a9952.js" defer></script>
  </body>
</html>
